<!--
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you go out with me?</title>
  <style>
    :root{
      --bg:#f5f5f8;
      --card:#ffffff;
      --text:#111;
      --accent:#e63946;
      --muted:#666;
      --glass: rgba(255,255,255,0.6);
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      background: linear-gradient(180deg,#f0f4ff 0%,var(--bg) 100%);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      transition:background 300ms ease, color 300ms ease;
    }

    /* center container */
    .stage{
      width:100%;
      max-width:980px;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:24px;
      align-items:start;
    }

    /* left: image */
    .photo-wrap{
      background:var(--card);
      border-radius:14px;
      padding:16px;
      box-shadow: 0 10px 30px rgba(10,10,30,0.08);
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:420px;
      overflow:hidden;
    }
    .photo-wrap img{
      max-width:100%;
      height:auto;
      border-radius:10px;
      display:block;
      object-fit:cover;
    }

    /* right: card with question + buttons */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.9), var(--glass));
      border-radius:14px;
      padding:20px;
      box-shadow: 0 8px 24px rgba(10,10,30,0.06);
      display:flex;
      flex-direction:column;
      gap:14px;
      align-items:stretch;
    }
    .question{
      font-size:20px;
      font-weight:700;
      margin:0;
    }
    .sub{
      color:var(--muted);
      font-size:14px;
      margin-top:4px;
    }

    .btn-row{
      display:flex;
      gap:12px;
      margin-top:12px;
    }
    button.btn{
      flex:1;
      padding:12px 14px;
      font-size:16px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      transition:transform 120ms ease, box-shadow 120ms ease;
      box-shadow: 0 6px 18px rgba(10,10,30,0.06);
    }
    button.btn:active{transform:translateY(1px)}
    .btn-yes{
      background: linear-gradient(90deg,#ff7b7b,#ff3d6e);
      color:white;
      font-weight:700;
    }
    .btn-no{
      background:transparent;
      color:var(--text);
      border:1px solid rgba(0,0,0,0.08);
    }

    .hint{font-size:13px;color:var(--muted);}

    /* result area */
    .result{
      margin-top:8px;
      min-height:36px;
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:600;
    }

    /* canvas (full screen on fireworks) */
    canvas#fx {
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:9999;
    }

    /* dark mode class */
    .dark {
      --bg:#0b1221;
      --card: linear-gradient(180deg, rgba(10,13,20,0.8), rgba(8,10,14,0.8));
      --text:#e6eef8;
      --accent:#60a5fa;
      --muted:#9fb0d6;
      --glass: rgba(255,255,255,0.04);
      background: linear-gradient(180deg,#071025 0%,#0b1221 100%);
    }
    .dark .card{ box-shadow: none; }
    .dark .photo-wrap{ box-shadow: inset 0 -30px 40px rgba(0,0,0,0.25); }

    /* small screens */
    @media (max-width:880px){
      .stage{ grid-template-columns:1fr; }
      .photo-wrap{ min-height:300px; }
    }

    /* little fireworks message */
    .confetti-msg{
      font-size:18px;
      font-weight:700;
      color:var(--accent);
      display:flex;
      gap:10px;
      align-items:center;
    }
  </style>
</head>
<body>
  <div class="stage" id="page">
    <div class="photo-wrap" aria-hidden="false">

      <img id="mainImg" src="proposal.JPG" alt="proposal image" />
    </div>

    <div class="card" role="region" aria-labelledby="q">
      <div>
        <h1 class="question" id="q">do u fw me? </h1>
        <div class="sub">yes/no</div>
      </div>

      <div class="btn-row" aria-hidden="false">
        <button class="btn btn-yes" id="yesBtn" aria-label="Yes">yes</button>
        <button class="btn btn-no" id="noBtn" aria-label="No">no</button>
      </div>

      <div class="hint">sarvagyasinghs.com</div>

      <div class="result" id="resultArea" aria-live="polite"></div>
    </div>
  </div>


  <canvas id="fx" width="800" height="600" aria-hidden="true"></canvas>

  <script>
    /* ====== small helper utils ====== */
    const $ = sel => document.querySelector(sel);
    const yesBtn = $('#yesBtn');
    const noBtn = $('#noBtn');
    const resultArea = $('#resultArea');
    const page = document.getElementById('page');
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');

    // resize canvas to cover
    function fitCanvas(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', fitCanvas);
    fitCanvas();

    /* ====== Dark mode (No button) ====== */
    noBtn.addEventListener('click', () => {
      document.documentElement.classList.add('dark');
      // small message
      resultArea.innerHTML = '<span style="color:var(--muted)">hell naw</span>';
      // optional playful tweak: slightly dim the image
      document.getElementById('mainImg').style.filter = 'grayscale(10%) contrast(0.9) brightness(0.8)';
    });

    /* ====== Fireworks implementation (Yes button) ======
       Lightweight canvas particle system: rockets -> explode to particles
    */
    // particle arrays
    let rockets = [];
    let particles = [];
    let running = false;

    function rand(min,max){ return Math.random()*(max-min)+min; }
    function hueToColor(h, a=1){ return `hsla(${h},95%,55%,${a})`; }

    class Rocket {
      constructor(x,y,targetX,targetY){
        this.x = x; this.y = y;
        this.tx = targetX; this.ty = targetY;
        this.vx = (this.tx - x) / rand(20,40);
        this.vy = (this.ty - y) / rand(20,40);
        this.life = 0; this.maxLife = rand(40,65);
        this.hue = rand(0,360);
      }
      update(){
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.08; // gravity effect
        this.life++;
        // if reached near target, explode
        if (this.life > this.maxLife || Math.hypot(this.x-this.tx,this.y-this.ty) < 30){
          this.explode();
          return false;
        }
        return true;
      }
      explode(){
        const count = Math.floor(rand(40,90));
        for(let i=0;i<count;i++){
          const speed = rand(1,6);
          const angle = rand(0, Math.PI*2);
          particles.push(new Particle(this.x, this.y, Math.cos(angle)*speed, Math.sin(angle)*speed, this.hue));
        }
      }
      draw(ctx){
        ctx.save();
        ctx.fillStyle = hueToColor(this.hue,0.95);
        ctx.beginPath();
        ctx.arc(this.x,this.y,2.5,0,Math.PI*2);
        ctx.fill();
        ctx.restore();
      }
    }

    class Particle {
      constructor(x,y,vx,vy,hue){
        this.x=x; this.y=y; this.vx=vx; this.vy=vy;
        this.life=0; this.decay = rand(40,120); this.hue = hue;
        this.alpha = 1;
      }
      update(){
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.02; // gravity
        this.vx *= 0.995;
        this.vy *= 0.995;
        this.life++;
        this.alpha = 1 - this.life/this.decay;
        if(this.life > this.decay) return false;
        return true;
      }
      draw(ctx){
        ctx.save();
        ctx.globalCompositeOperation = 'lighter';
        ctx.fillStyle = hueToColor(this.hue, Math.max(0, this.alpha));
        ctx.beginPath();
        ctx.arc(this.x, this.y, Math.max(0.6, 2.2*this.alpha), 0, Math.PI*2);
        ctx.fill();
        ctx.restore();
      }
    }

    // animation loop
    function loop(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // slightly fade background for trails
      ctx.fillStyle = 'rgba(0,0,0,0.15)';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      // update rockets
      rockets = rockets.filter(r => r.update());
      rockets.forEach(r => r.draw(ctx));

      // update particles
      particles = particles.filter(p => p.update());
      particles.forEach(p => p.draw(ctx));

      // occasionally spawn random rockets while running
      if(running && Math.random() < 0.06){
        const sx = rand(canvas.width*0.1, canvas.width*0.9);
        rockets.push(new Rocket(sx, canvas.height + 20, rand(canvas.width*0.25, canvas.width*0.75), rand(canvas.height*0.1, canvas.height*0.5)));
      }

      requestAnimationFrame(loop);
    }

    // start fireworks show
    function startFireworks(){
      running = true;
      document.documentElement.classList.remove('dark'); // ensure not dark
      resultArea.innerHTML = '<span class="confetti-msg">love u pooja mishra </span>';
      // brighten image
      const img = document.getElementById('mainImg');
      img.style.filter = 'brightness(1.05) saturate(1.05)';
      // launch a few initial rockets toward center
      for(let i=0;i<6;i++){
        const sx = canvas.width * (0.2 + 0.6*Math.random());
        rockets.push(new Rocket(sx, canvas.height + 50, canvas.width*0.35 + Math.random()*canvas.width*0.3, canvas.height*0.25 + Math.random()*canvas.height*0.2));
      }
      // stop after some time (e.g., 8 seconds) but with lingering particles
      setTimeout(() => {
        running = false;
        // let particles fade naturally. show a persistent congrat message
        setTimeout(()=> {
          resultArea.innerHTML = '<span class="confetti-msg">daru prty</span>';
        }, 1600);
      }, 8000);
    }

    // Ensure loop running
    loop();

    // Yes handler
    yesBtn.addEventListener('click', () => {
      // brief animation to the button to avoid accidental repeats
      yesBtn.disabled = true;
      noBtn.disabled = true;
      startFireworks();
      // re-enable after some time
      setTimeout(()=>{ yesBtn.disabled=false; noBtn.disabled=false; }, 11000);
    });

    // Accessibility: allow keyboard
    yesBtn.addEventListener('keydown', (e)=>{ if(e.key==='Enter') yesBtn.click(); });
    noBtn.addEventListener('keydown', (e)=>{ if(e.key==='Enter') noBtn.click(); });

    // small safeguard: if image missing, show a friendly placeholder text
    document.getElementById('mainImg').addEventListener('error', function(){
      this.style.display='none';
      const wrap = this.parentElement;
      const p = document.createElement('div');
      p.style.padding='30px';
      p.style.textAlign='center';
      p.style.color='var(--muted)';
      p.innerHTML = '<strong>Image not found.</strong><br/> Save your picture as <code>proposal.jpg</code> in the same folder as this file.';
      wrap.appendChild(p);
    });
  </script>
</body>
</html>
-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will you go out with me?</title>
  <style>
    :root{
      --bg:#f0f4ff;
      --card:#ffffff;
      --text:#111;
      --accent:#e63946;
      --muted:#666;
      --glass: rgba(255,255,255,0.6);
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}

    /* Fallback (shows immediately) â€” gradient only */
    body{
      background-color: var(--bg);
      background-image: linear-gradient(180deg, rgba(240,244,255,0.6), rgba(245,245,248,0.6));
      background-repeat: no-repeat;
      background-position: center center;
      background-size: cover;
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      transition:background 300ms ease, color 300ms ease;
      min-height:100vh;
    }

    /* When the background image finishes loading we add this class */
    body.bg-loaded{
      /* paint the actual photo on top of the gradient */
      background-image:
        url('IMG_9674.JPG'),
        linear-gradient(180deg, rgba(240,244,255,0.6), rgba(245,245,248,0.6));
      background-repeat: no-repeat, no-repeat;
      background-position: center center, center center;
      background-size: cover, cover;
      background-attachment: fixed, fixed;
    }

    /* center container - single column so image is above buttons */
    .stage{
      width:100%;
      max-width:760px;
      display:grid;
      grid-template-columns: 1fr;
      gap:18px;
      align-items:start;
      margin: 12px;
      position: relative;
      z-index: 2; /* content above canvas */
    }

    /* photo card (image on top) */
    .photo-wrap{
      background: linear-gradient(180deg, rgba(255,255,255,0.85), var(--glass));
      border-radius:14px;
      padding:12px;
      box-shadow: 0 10px 30px rgba(10,10,30,0.08);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .photo-wrap img{
      width:100%;
      height:auto;
      border-radius:10px;
      display:block;
      object-fit:cover;
      max-height:520px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.9), var(--glass));
      border-radius:14px;
      padding:18px;
      box-shadow: 0 8px 24px rgba(10,10,30,0.06);
      display:flex;
      flex-direction:column;
      gap:12px;
      align-items:stretch;
    }
    .question{
      font-size:20px;
      font-weight:700;
      margin:0;
      text-align:center;
    }
    .sub{
      color:var(--muted);
      font-size:14px;
      margin-top:4px;
      text-align:center;
    }

    .btn-row{
      display:flex;
      gap:12px;
      margin-top:8px;
      justify-content:center;
    }
    .btn-row .btn{ min-width:140px; max-width:260px; }

    button.btn{
      padding:12px 14px;
      font-size:16px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      transition:transform 120ms ease, box-shadow 120ms ease, opacity 160ms;
      box-shadow: 0 6px 18px rgba(10,10,30,0.06);
    }
    button.btn:active{transform:translateY(1px)}
    .btn-yes{
      background: linear-gradient(90deg,#ff7b7b,#ff3d6e);
      color:white;
      font-weight:700;
    }
    .btn-no{
      background:transparent;
      color:var(--text);
      border:1px solid rgba(0,0,0,0.08);
    }

    .hint{font-size:13px;color:var(--muted); text-align:center;}

    .result{
      margin-top:8px;
      min-height:36px;
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:600;
      justify-content:center;
    }

    /* canvas kept behind content now (lower z-index), transparent by default */
    canvas#fx {
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index: 1; /* below .stage which is z-index:2 */
      background: transparent;
    }

    /* dark mode class: use bg-loaded layering order consistent */
    .dark {
      --bg:#071025;
      --text:#e6eef8;
      --muted:#9fb0d6;
      --glass: rgba(255,255,255,0.04);
      color:var(--text);
    }
    .dark body.bg-loaded {
      background-image:
        url('IMG_9674.JPG'),
        linear-gradient(180deg, rgba(7,16,37,0.6), rgba(11,18,33,0.6));
      background-repeat: no-repeat, no-repeat;
      background-position: center center, center center;
      background-size: cover, cover;
      background-attachment: fixed, fixed;
    }

    .dark .card{ box-shadow: none; }
    .dark .photo-wrap{ box-shadow: inset 0 -30px 40px rgba(0,0,0,0.25); }

    @media (max-width:520px){
      .stage{ max-width:420px; gap:12px; }
      .card{ padding:14px; }
      .photo-wrap{ padding:10px; }
      .btn-row{ gap:10px; }
      button.btn{ font-size:15px; padding:10px 12px; }
    }

    .confetti-msg{
      font-size:18px;
      font-weight:700;
      color:var(--accent);
      display:flex;
      gap:10px;
      align-items:center;
    }
  </style>
</head>
<body>
  <div class="stage" id="page">
    <div class="photo-wrap" aria-hidden="false">
      <img id="mainImg" src="proposal.JPG" alt="proposal image" />
    </div>

    <div class="card" role="region" aria-labelledby="q">
      <div>
        <h1 class="question" id="q">do u fw me?</h1>
        <div class="sub">yes/no</div>
      </div>

      <div class="btn-row" aria-hidden="false">
        <button class="btn btn-yes" id="yesBtn" aria-label="Yes">yes</button>
        <button class="btn btn-no" id="noBtn" aria-label="No">no</button>
      </div>

      <div class="hint">sarvagyasinghs.com</div>

      <div class="result" id="resultArea" aria-live="polite"></div>
    </div>
  </div>

  <!-- canvas for fireworks (behind content) -->
  <canvas id="fx" width="800" height="600" aria-hidden="true"></canvas>

  <!-- audio -->
  <audio id="yesAudio" src="prakhar_sarvagya.m4a" preload="auto"></audio>
  <audio id="noAudio" src="prakhar_golmal.m4a" preload="auto"></audio>

  <script>
    /* ====== preload background image and apply only when ready ====== */
    (function preloadBg(){
      const img = new Image();
      img.src = 'IMG_9674.JPG';
      img.onload = () => {
        // add class that applies background-image layering
        document.documentElement.classList.remove('dark'); // keep dark state separate
        document.body.classList.add('bg-loaded');
      };
      img.onerror = () => {
        // if it fails, we simply keep the gradient fallback (no black flash)
        console.warn('Background image failed to load; continuing with gradient fallback.');
      };
    })();

    /* ====== main UI & fireworks logic ====== */
    const $ = sel => document.querySelector(sel);
    const yesBtn = $('#yesBtn');
    const noBtn = $('#noBtn');
    const resultArea = $('#resultArea');
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    const yesAudio = document.getElementById('yesAudio');
    const noAudio = document.getElementById('noAudio');

    function fitCanvas(){ canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener('resize', fitCanvas);
    fitCanvas();

    let rockets = [];
    let particles = [];
    let running = false;

    function rand(min,max){ return Math.random()*(max-min)+min; }
    function hueToColor(h, a=1){ return `hsla(${h},95%,55%,${a})`; }

    class Rocket {
      constructor(x,y,targetX,targetY){
        this.x = x; this.y = y;
        this.tx = targetX; this.ty = targetY;
        this.vx = (this.tx - x) / rand(20,40);
        this.vy = (this.ty - y) / rand(20,40);
        this.life = 0; this.maxLife = rand(40,65);
        this.hue = rand(0,360);
      }
      update(){
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.08;
        this.life++;
        if (this.life > this.maxLife || Math.hypot(this.x-this.tx,this.y-this.ty) < 30){
          this.explode(); return false;
        }
        return true;
      }
      explode(){
        const count = Math.floor(rand(40,90));
        for(let i=0;i<count;i++){
          const speed = rand(1,6);
          const angle = rand(0, Math.PI*2);
          particles.push(new Particle(this.x, this.y, Math.cos(angle)*speed, Math.sin(angle)*speed, this.hue));
        }
      }
      draw(ctx){
        ctx.save();
        ctx.fillStyle = hueToColor(this.hue,0.95);
        ctx.beginPath();
        ctx.arc(this.x,this.y,2.5,0,Math.PI*2);
        ctx.fill();
        ctx.restore();
      }
    }

    class Particle {
      constructor(x,y,vx,vy,hue){
        this.x=x; this.y=y; this.vx=vx; this.vy=vy;
        this.life=0; this.decay = rand(40,120); this.hue = hue;
        this.alpha = 1;
      }
      update(){
        this.x += this.vx; this.y += this.vy;
        this.vy += 0.02;
        this.vx *= 0.995; this.vy *= 0.995;
        this.life++;
        this.alpha = 1 - this.life/this.decay;
        if(this.life > this.decay) return false;
        return true;
      }
      draw(ctx){
        ctx.save();
        ctx.globalCompositeOperation = 'lighter';
        ctx.fillStyle = hueToColor(this.hue, Math.max(0, this.alpha));
        ctx.beginPath();
        ctx.arc(this.x, this.y, Math.max(0.6, 2.2*this.alpha), 0, Math.PI*2);
        ctx.fill();
        ctx.restore();
      }
    }

    // loop: only draw when fireworks running or there are particles to show
    function loop(){
      // if nothing to render, don't paint to avoid any darkening
      if(!running && particles.length === 0 && rockets.length === 0){
        requestAnimationFrame(loop);
        return;
      }

      // fade previous frame slightly to create trails (transparent black)
      ctx.fillStyle = 'rgba(0,0,0,0.12)';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      rockets = rockets.filter(r => r.update());
      rockets.forEach(r => r.draw(ctx));

      particles = particles.filter(p => p.update());
      particles.forEach(p => p.draw(ctx));

      if(running && Math.random() < 0.06){
        const sx = rand(canvas.width*0.1, canvas.width*0.9);
        rockets.push(new Rocket(sx, canvas.height + 20, rand(canvas.width*0.25, canvas.width*0.75), rand(canvas.height*0.1, canvas.height*0.5)));
      }

      requestAnimationFrame(loop);
    }

    // start the loop (it will be idle until fireworks actually run)
    loop();

    function startFireworks(){
      try { yesAudio.currentTime = 0; yesAudio.play(); } catch(e){ /* ignore */ }

      running = true;
      document.documentElement.classList.remove('dark'); // ensure not dark
      resultArea.innerHTML = '<span class="confetti-msg">love u pooja mishra instagram</span>';
      document.getElementById('mainImg').style.filter = 'brightness(1.06) saturate(1.12)';

      for(let i=0;i<6;i++){
        const sx = canvas.width * (0.2 + 0.6*Math.random());
        rockets.push(new Rocket(sx, canvas.height + 50, canvas.width*0.35 + Math.random()*canvas.width*0.3, canvas.height*0.25 + Math.random()*canvas.height*0.2));
      }

      // stop generating after a while (particles will fade)
      setTimeout(()=>{ running = false; setTimeout(()=>{ resultArea.innerHTML = '<span class="confetti-msg">Congrats â€” celebration mode! ðŸŽ†</span>'; }, 1200); }, 8000);
    }

    yesBtn.addEventListener('click', ()=>{
      yesBtn.disabled = true; noBtn.disabled = true;
      startFireworks();
      setTimeout(()=>{ yesBtn.disabled=false; noBtn.disabled=false; }, 11000);
    });

    noBtn.addEventListener('click', ()=>{
      try { noAudio.currentTime = 0; noAudio.play(); } catch(e){}
      document.documentElement.classList.add('dark');
      resultArea.innerHTML = '<span style="color:var(--muted)">waah</span>';
      document.getElementById('mainImg').style.filter = 'grayscale(20%) contrast(0.85) brightness(0.7)';
    });

    // image error handling for visible img element
    document.getElementById('mainImg').addEventListener('error', function(){
      this.style.display='none';
      const wrap = this.parentElement;
      const p = document.createElement('div');
      p.style.padding='30px';
      p.style.textAlign='center';
      p.style.color='var(--muted)';
      p.innerHTML = '<strong>Image not found.</strong><br/> Save files: <code>proposal.JPG</code>, <code>IMG_9674.JPG</code>, and audio files in the same folder.';
      wrap.appendChild(p);
    });

    // safety: if canvas remains blank for long, keep it cleared
    ctx.clearRect(0,0,canvas.width,canvas.height);
  </script>
</body>
</html>

